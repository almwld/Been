workflows:
  build-full-apk:
    name: ðŸš€ Build Full APK Yemen Market
    max_build_duration: 60
    environment:
      flutter: stable

    scripts:
      # -----------------------------------------------
      - name: Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Flutter Ø­Ø¯ÙŠØ« Ù…Ø¤Ù‚Øª ðŸ› 
        script: |
          echo "âœ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Flutter Ø­Ø¯ÙŠØ« temp_project"
          flutter create -t app temp_project

      # -----------------------------------------------
      - name: Ù†Ø³Ø® ÙƒÙˆØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø£ØµÙ„ÙŠ ÙˆØ§Ù„Ù…ØµØ§Ø¯Ø± ðŸ“‚
        script: |
          echo "ðŸ“¦ Ù†Ø³Ø® lib, assets, pubspec.yaml Ø¥Ù„Ù‰ temp_project"
          rsync -a lib/ temp_project/lib/
          rsync -a assets/ temp_project/assets/ || true
          cp pubspec.yaml temp_project/

      # -----------------------------------------------
      - name: ØªØ«Ø¨ÙŠØª dependencies ðŸ”„
        script: |
          cd temp_project
          echo "ðŸ”§ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø­Ø²Ù…"
          flutter pub get

      # -----------------------------------------------
      - name: Ø¨Ù†Ø§Ø¡ APK Release ðŸš€
        script: |
          cd temp_project
          echo "ðŸ”¨ Ø¨Ù†Ø§Ø¡ APK Ù†Ø³Ø®Ø© release"
          flutter build apk --release --no-tree-shake-icons

    # -----------------------------------------------
    artifacts:
      - temp_project/build/app/outputs/flutter-apk/app-release.apk
